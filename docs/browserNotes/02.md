# 使用SpeechSynthesisUtterance实现语音播放功能

项目需求：将文字转换成语音进行播放

文档地址：[https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance](https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance)

SpeechSynthesisUtterance是借助浏览器来实现的语音播放

核心代码：

```js
 // 语音播放
  function voicePlay() {
    if (!('speechSynthesis'in window)) {
      console.log('当前浏览器不支持SpeechSynthesisUtterance！')
      return
    }
    // 先取消之前的
    window.speechSynthesis.cancel()
    const utterThis  = new SpeechSynthesisUtterance()
    utterThis.text = voicePlayText.value
    // volume音量 0-1 1
    // pitch音调 0-2 1
    // rate语速 0.1-10 1
    utterThis.volume = volume.value
    utterThis.pitch = pitch.value
    utterThis.rate = rate.value
    window.speechSynthesis.speak(utterThis)
  }
```

::: tip 备注
谷歌浏览器需要用click方法触发，可以用js模拟个click方法

```html
  <el-button ref="buttonRef" @click="voicePlay" style="display: none"></el-button>
```

```js
if (navigator.userAgent.indexOf('Chrome') > -1) {
      buttonRef.value.$el.click(voicePlayText)
    } else {
      voicePlay(voicePlayText)
    }
```
:::
