import{_ as t,M as e,p,q as o,R as n,t as s,N as c,a1 as l}from"./framework-b7c41258.js";const i={},u=n("h1",{id:"使用speechsynthesisutterance实现语音播放功能",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#使用speechsynthesisutterance实现语音播放功能","aria-hidden":"true"},"#"),s(" 使用SpeechSynthesisUtterance实现语音播放功能")],-1),r=n("p",null,"项目需求：将文字转换成语音进行播放",-1),k={href:"https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance",target:"_blank",rel:"noopener noreferrer"},d=l(`<p>SpeechSynthesisUtterance是借助浏览器来实现的语音播放</p><p>核心代码：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>    <span class="token comment">// 语音播放</span>
    <span class="token comment">// forNum循环次数</span>
    <span class="token keyword">function</span> <span class="token function">voicePlay</span><span class="token punctuation">(</span><span class="token parameter">forNum</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">&#39;speechSynthesis&#39;</span><span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;当前浏览器不支持SpeechSynthesisUtterance！&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      window<span class="token punctuation">.</span>speechSynthesis<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> utterThis  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpeechSynthesisUtterance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      utterThis<span class="token punctuation">.</span>text <span class="token operator">=</span> voicePlayText<span class="token punctuation">.</span>value
      <span class="token comment">// volume音量 0-1 1</span>
      <span class="token comment">// tone音调 0-2 1</span>
      <span class="token comment">// speed语速 0.1-10</span>

      <span class="token comment">// 火狐浏览器播放的是英文，所以需要加这个</span>
      utterThis<span class="token punctuation">.</span>lang <span class="token operator">=</span> <span class="token string">&#39;zh-cn&#39;</span>
      utterThis<span class="token punctuation">.</span>volume <span class="token operator">=</span> volume<span class="token punctuation">.</span>value<span class="token operator">/</span><span class="token number">10</span>
      utterThis<span class="token punctuation">.</span>pitch <span class="token operator">=</span> tone<span class="token punctuation">.</span>value
      utterThis<span class="token punctuation">.</span>rate <span class="token operator">=</span> speed<span class="token punctuation">.</span>value
      <span class="token comment">// 循环播放</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> forNum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>speechSynthesis<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span>utterThis<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">备注</p><p>谷歌浏览器需要用click方法触发，可以用js模拟个click方法</p><p><strong>这个方法在最新的谷歌浏览器里不能用，解决办法是使用Edge浏览器打开</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>buttonRef<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>voicePlay<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;Chrome&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      buttonRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>voicePlayText<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">voicePlay</span><span class="token punctuation">(</span>voicePlayText<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div>`,4);function v(m,h){const a=e("ExternalLinkIcon");return p(),o("div",null,[u,r,n("p",null,[s("文档地址："),n("a",k,[s("https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance"),c(a)])]),d])}const g=t(i,[["render",v],["__file","02.html.vue"]]);export{g as default};
